<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz HP</title>
</head>
    <link rel="stylesheet" href="style1.css"> 
<body>
    <h1>Benvenuto al quiz!</h1>
    <p id="greeting"></p>

<form name="submit-to-google-sheet">
   <button type="submit">Invia</button>
</form>

    <script>
      // Funzione per ottenere i parametri dalla URL
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      // Ottieni nome e cognome dalla URL
      const nome = getQueryParam('nome');
      const cognome = getQueryParam('cognome');

      // Mostra il messaggio di benvenuto
      const greeting = document.getElementById('greeting');
      if (nome && cognome) {
        greeting.textContent = `Ciao ${nome} ${cognome}, sei pronto per il quiz?`;
      } else {
        greeting.textContent = "Benvenuto al quiz!";
      }

    const scriptURL = 'https://script.google.com/macros/s/AKfycbyj0qIoPv1cgjS4UIV6r3KVTJoeOvKdbSJJm6abUuG1gRQzNbJkhkJIexZPweJee9Hy9w/exec'
    const form = document.forms['submit-to-google-sheet']
	
   form.addEventListener('submit', e => {
   e.preventDefault()

   // Crea un nuovo oggetto FormData a partire dal form esistente
   const formData = new FormData(form);

    // Aggiungi nome e cognome al FormData
    formData.append('nome', nome); // Aggiunge il nome estratto dalla URL
    formData.append('cognome', cognome); // Aggiunge il cognome estratto dalla URL
	  
    fetch(scriptURL, { method: 'POST', body: formData })
      .then(response => console.log('Success!', response))	    
	  .catch(error => console.error('Error!', error.message))		
  })        
    </script>

</body>
</html>

