<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz HP</title>
</head>
    <link rel="stylesheet" href="style.css"> 
<body>
    <h1>Benvenuto al quiz!</h1>
    <p id="greeting"></p>

	<!-- Contenitore per l'immagine -->
    <div class="image-container">
        <img src="https://raw.githubusercontent.com/Potasovvi/HP_quiz-V4/main/Harry_Vold.jpg" alt="Immagine di Harry Potter">
    </div>
	

<!-- Form del quiz -->
    <form id="quizForm">
        <!-- Prima domanda -->
        <p>1) Qual è il drago che Cedric Diggory deve affrontare durante la prima prova del Torneo TreMaghi?</p>
        <label>
            <input type="radio" name="domanda1" value="A" required> A) Ungaro Spinato
        </label><br>
        <label>
            <input type="radio" name="domanda1" value="B"> B) Grunocorto Svedese
        </label><br>
        <label>
            <input type="radio" name="domanda1" value="C"> C) Gallese Verde
        </label><br>
        <label>
            <input type="radio" name="domanda1" value="D"> D) Petardo Cinese
        </label><br>

        <!-- Seconda domanda -->
        <p>2) Qual è il nome dell'elfo domestico che serve la famiglia Malfoy?</p>
        <label>
            <input type="radio" name="domanda2" value="A" required> A) Winky
        </label><br>
        <label>
            <input type="radio" name="domanda2" value="B"> B) Dobby
        </label><br>
        <label>
            <input type="radio" name="domanda2" value="C"> C) Kreacher
        </label><br>
        <label>
            <input type="radio" name="domanda2" value="D"> D) Hokey
        </label><br>

        <!-- Terza domanda -->
        <p>3) Su quale binario viaggia l’ Hogwarts Express?</p>
        <label>
            <input type="radio" name="domanda3" value="A" required> A) 3 e un quarto
        </label><br>
        <label>
            <input type="radio" name="domanda3" value="B"> B) 12 e cinque
        </label><br>
        <label>
            <input type="radio" name="domanda3" value="C"> C) 9 e tre quarti
        </label><br>
        <label>
            <input type="radio" name="domanda3" value="D"> D) 5 e venti
        </label><br>

        <!-- Quarta domanda -->
        <p>4) Quale animale rappresenta il Patronus di Hermione Granger?</p>
        <label>
            <input type="radio" name="domanda4" value="A" required> A) Cane
        </label><br>
        <label>
            <input type="radio" name="domanda4" value="B"> B) Cervo
        </label><br>
        <label>
            <input type="radio" name="domanda4" value="C"> C) Cavallo
        </label><br>
        <label>
            <input type="radio" name="domanda4" value="D"> D) Lontra
        </label><br>

        <!-- Quinta domanda -->
        <p>5) Quale pozione deve essere utilizzata per curare una ferita di basilisco?</p>
        <label>
            <input type="radio" name="domanda5" value="A" required> A) Pozione della Fenice
        </label><br>
        <label>
            <input type="radio" name="domanda5" value="B"> B) Pozione di Mandragola
        </label><br>
        <label>
            <input type="radio" name="domanda5" value="C"> C) Pozione di Smeraldo
        </label><br>
        <label>
            <input type="radio" name="domanda5" value="D"> D) Pozione del Risveglio
        </label><br>

        <!-- Sesta domanda -->
        <p>6) Chi è il creatore del Mappa del Malandrino?</p>
        <label>
            <input type="radio" name="domanda6" value="A" required> A) James Potter, Sirius Black, Remus Lupin, e Peter Pettigrew
        </label><br>
        <label>
            <input type="radio" name="domanda6" value="B"> B) Albus Silente, Severus Piton, Gellert Grindelwald, e Minerva McGranitt
        </label><br>
        <label>
            <input type="radio" name="domanda6" value="C"> C) Godric Grifondoro, Salazar Serpeverde, Helga Tassorosso, e Rowena Ravenclaw
        </label><br>
        <label>
            <input type="radio" name="domanda6" value="D"> D) Fred e George Weasley, Lee Jordan, e Angelina Johnson
        </label><br>

        <!-- Settima domanda -->
        <p>7) Chi è l'autore del libro "Vita e Menzogne di Albus Silente"?</p>
        <label>
            <input type="radio" name="domanda7" value="A" required> A) Gilderoy Allock
        </label><br>
        <label>
            <input type="radio" name="domanda7" value="B"> B) Rita Skeeter
        </label><br>
        <label>
            <input type="radio" name="domanda7" value="C"> C) Bathilda Bath
        </label><br>
        <label>
            <input type="radio" name="domanda7" value="D"> D) Miranda Goshawk
        </label><br>

        <!-- Ottava domanda -->
        <p>8) Qual è il nome del fantasma della casa di Tassorosso?</p>
        <label>
            <input type="radio" name="domanda8" value="A" required> A) Il Frate Grasso
        </label><br>
        <label>
            <input type="radio" name="domanda8" value="B"> B) Il Barone Sanguinario
        </label><br>
        <label>
            <input type="radio" name="domanda8" value="C"> C) Sir Nicholas
        </label><br>
        <label>
            <input type="radio" name="domanda8" value="D"> D) La Dama Grigia
        </label><br>

        <!-- Nona domanda -->
        <p>9) Quali sono i colori di Grifondoro?</p>
        <label>
            <input type="radio" name="domanda9" value="A" required> A) Rosso e oro
        </label><br>
        <label>
            <input type="radio" name="domanda9" value="B"> B) Verde e argento
        </label><br>
        <label>
            <input type="radio" name="domanda9" value="C"> C) Blu e argento
        </label><br>
        <label>
            <input type="radio" name="domanda9" value="D"> D) Giallo e nero
        </label><br>

        <!-- Decima domanda -->
        <p>10) Chi è il migliore amico di Harry?</p>
        <label>
            <input type="radio" name="domanda10" value="A" required> A) Draco Malfoy
        </label><br>
        <label>
            <input type="radio" name="domanda10" value="B"> B) Dean Thomas
        </label><br>
        <label>
            <input type="radio" name="domanda10" value="C"> C) Ron Weasley
        </label><br>
        <label>
            <input type="radio" name="domanda10" value="D"> D) Seamus Finningan
        </label><br>

        <br><br>
        <button type="submit">Invia</button>
    </form>


	
<!-- Form del quiz 
<form name="submit-to-google-sheet">
   <button type="submit">Invia</button>
</form>
-->

<p id="result"></p> <!-- Questo sarà usato per mostrare il punteggio -->

    <script>
      // Funzione per ottenere i parametri dalla URL
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      // Ottieni nome e cognome dalla URL
      const nome = getQueryParam('nome');
      const cognome = getQueryParam('cognome');

      // Mostra il messaggio di benvenuto
      const greeting = document.getElementById('greeting');
      if (nome && cognome) {
        greeting.textContent = `Ciao ${nome} ${cognome}, sei pronto per il quiz?`;
      } else {
        greeting.textContent = "Benvenuto al quiz!";
      }


 

 // Aggiungi un listener per il submit del form
        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Evita il comportamento di invio predefinito del form


            // Ottieni le risposte selezionate
            const risposta1 = document.querySelector('input[name="domanda1"]:checked').value;
            const risposta2 = document.querySelector('input[name="domanda2"]:checked').value;
            const risposta3 = document.querySelector('input[name="domanda3"]:checked').value;
            const risposta4 = document.querySelector('input[name="domanda4"]:checked').value;
            const risposta5 = document.querySelector('input[name="domanda5"]:checked').value;
            const risposta6 = document.querySelector('input[name="domanda6"]:checked').value;
            const risposta7 = document.querySelector('input[name="domanda7"]:checked').value;
            const risposta8 = document.querySelector('input[name="domanda8"]:checked').value;
            const risposta9 = document.querySelector('input[name="domanda9"]:checked').value;
            const risposta10 = document.querySelector('input[name="domanda10"]:checked').value;

	    // Risposte corrette
            const risposteCorrette = {
                domanda1: 'B',
                domanda2: 'B',
                domanda3: 'C',
                domanda4: 'D',
                domanda5: 'B',
                domanda6: 'A',
                domanda7: 'B',
                domanda8: 'A',
                domanda9: 'A',
                domanda10: 'C'
            };

            // Calcola il punteggio
            let punteggio = 0;
            for (let i = 1; i <= 10; i++) {
                if (document.querySelector(`input[name="domanda${i}"]:checked`) &&
                    document.querySelector(`input[name="domanda${i}"]:checked`).value === risposteCorrette[`domanda${i}`])
					 	 { punteggio++;}
					  } 
		   

	    // Mostra il punteggio all'utente
            const result = document.getElementById('result');
            result.textContent = `Hai ottenuto un punteggio di ${punteggio}.`;

            // Se vuoi inviare il punteggio a Google Sheets, puoi aggiungerlo nel formData
            const formData = new FormData();
            formData.append('nome', nome); // Aggiunge il nome estratto dalla URL
            formData.append('cognome', cognome); // Aggiunge il cognome estratto dalla URL
            formData.append('punteggio', punteggio); // Aggiunge il punteggio




		
            // Invia i dati al Google Sheet (se necessario)
	    const scriptURL = 'https://script.google.com/macros/s/AKfycbyj0qIoPv1cgjS4UIV6r3KVTJoeOvKdbSJJm6abUuG1gRQzNbJkhkJIexZPweJee9Hy9w/exec'


    // Controlla se il nome e cognome sono già presenti nel Google Sheet
    fetch(scriptURL, {method: 'POST',body: formData})
    .then(response => response.json())
    .then(data => {
	    	// Aggiungi log per verificare il contenuto di 'data'
 		 console.log('Response Data:', data);
        if (data.result === 'duplicate') {alert('Nome e cognome già presenti! Prova con un altro nome.');}
	else if (data.result === 'success') 
	{
	    alert('Quiz compilato con successo');
            // Reindirizza alla pagina di ringraziamenti
            window.location.href = 'https://potasovvi.github.io/HP_quiz-V4/ringraziamenti.html';
        }
	    })
	    .catch(error => console.error('Error!', error.message));
	});




	    
    </script>

</body>
</html>

