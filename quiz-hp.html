<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz HP</title>
</head>
    <link rel="stylesheet" href="style1.css"> 
<body>
    <h1>Benvenuto al quiz!</h1>
    <p id="greeting"></p>

<!-- Form del quiz -->
    <form id="quizForm">
        <!-- Prima domanda -->
        <p>1) Roma è la capitale d'Italia?</p>
        <label>
            <input type="radio" name="domanda1" value="vero" required> Vero
        </label>
        <label>
            <input type="radio" name="domanda1" value="falso"> Falso
        </label>

        <!-- Seconda domanda -->
        <p>2) Londra è la capitale d'Inghilterra?</p>
        <label>
            <input type="radio" name="domanda2" value="vero" required> Vero
        </label>
        <label>
            <input type="radio" name="domanda2" value="falso"> Falso
        </label>

        <br><br>
        <button type="submit">Invia</button>
    </form>


	
<!-- Form del quiz 
<form name="submit-to-google-sheet">
   <button type="submit">Invia</button>
</form>
-->

<p id="result"></p> <!-- Questo sarà usato per mostrare il punteggio -->

    <script>
      // Funzione per ottenere i parametri dalla URL
      function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
      }

      // Ottieni nome e cognome dalla URL
      const nome = getQueryParam('nome');
      const cognome = getQueryParam('cognome');

      // Mostra il messaggio di benvenuto
      const greeting = document.getElementById('greeting');
      if (nome && cognome) {
        greeting.textContent = `Ciao ${nome} ${cognome}, sei pronto per il quiz?`;
      } else {
        greeting.textContent = "Benvenuto al quiz!";
      }










 // Aggiungi un listener per il submit del form
        document.getElementById('quizForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Evita il comportamento di invio predefinito del form

            // Ottieni le risposte selezionate
            const risposta1 = document.querySelector('input[name="domanda1"]:checked').value;
            const risposta2 = document.querySelector('input[name="domanda2"]:checked').value;

            // Inizializza il punteggio
            let punteggio = 0;

            // Controlla le risposte (entrambe devono essere "vero")
            if (risposta1 === "vero") {
                punteggio += 1;
            }

            if (risposta2 === "vero") {
                punteggio += 1;
            }

            // Mostra il punteggio all'utente
            const result = document.getElementById('result');
            result.textContent = `Hai ottenuto un punteggio di ${punteggio}/2.`;

            // Se vuoi inviare il punteggio a Google Sheets, puoi aggiungerlo nel formData
            const formData = new FormData();
            formData.append('nome', nome); // Aggiunge il nome estratto dalla URL
            formData.append('cognome', cognome); // Aggiunge il cognome estratto dalla URL
            formData.append('punteggio', punteggio); // Aggiunge il punteggio

            // Invia i dati al Google Sheet (se necessario)
            fetch('https://script.google.com/macros/s/AKfycbyj0qIoPv1cgjS4UIV6r3KVTJoeOvKdbSJJm6abUuG1gRQzNbJkhkJIexZPweJee9Hy9w/exec', {
                method: 'POST',
                body: formData
            }).then(response => {
                console.log('Success!', response);

                // Reindirizza alla pagina di ringraziamenti (facoltativo)
                window.location.href = `https://potasovvi.github.io/HP_quiz-V4/ringraziamenti.html`;
            }).catch(error => console.error('Error!', error.message));
        });
















	    
<!-- 

    const scriptURL = 'https://script.google.com/macros/s/AKfycbyj0qIoPv1cgjS4UIV6r3KVTJoeOvKdbSJJm6abUuG1gRQzNbJkhkJIexZPweJee9Hy9w/exec'
    const form = document.forms['submit-to-google-sheet']
	
   form.addEventListener('submit', e => {
   e.preventDefault()

   // Crea un nuovo oggetto FormData a partire dal form esistente
   const formData = new FormData(form);

    // Aggiungi nome e cognome al FormData
    formData.append('nome', nome); // Aggiunge il nome estratto dalla URL
    formData.append('cognome', cognome); // Aggiunge il cognome estratto dalla URL
	  
    fetch(scriptURL, { method: 'POST', body: formData })
      .then(response => 
	      {
	      console.log('Success!', response);
		      
      	        // Ottieni i valori di nome e cognome dal form
        	const nome = document.getElementById('nome').value;
        	const cognome = document.getElementById('cognome').value;

        // Reindirizza alla pagina "" per i ringraziamenti
        window.location.href = `https://potasovvi.github.io/HP_quiz-V4/ringraziamenti.html`;
        })	 
	  .catch(error => console.error('Error!', error.message))		
  })       

-->




	    
    </script>

</body>
</html>

